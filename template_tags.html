
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
<title>Panya Documentation</title>
    <link rel="stylesheet" href="static/classy.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="Panya v0.0.1 documentation" href="index.html" />
    <link rel="prev" title="Template Context Processors" href="template_context_processors.html" /> 
  </head>
  <body>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="template-tags">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">Template Tags</a><a class="headerlink" href="#template-tags" title="Permalink to this headline">¶</a></h1>
<p>This document describes template tags provided by the standard set of Panya apps. A template tag takes some input and returns a modified result. For tags returning HTML structures for inclusion within templates see <a class="reference internal" href="inclusion_tags.html#inclusion-tags"><em>inclusion tags</em></a>.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#template-tags" id="id2">Template Tags</a><ul>
<li><a class="reference internal" href="#panya-template-tags" id="id3">Panya Template Tags</a><ul>
<li><a class="reference internal" href="#humanize-time-diff" id="id4">humanize_time_diff</a></li>
<li><a class="reference internal" href="#smart-query-string" id="id5">smart_query_string</a></li>
<li><a class="reference internal" href="#smart-url" id="id6">smart_url</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="panya-template-tags">
<span id="template-tags-panya"></span><h2><a class="toc-backref" href="#id3">Panya Template Tags</a><a class="headerlink" href="#panya-template-tags" title="Permalink to this headline">¶</a></h2>
<p>The following tags are contained in <tt class="docutils literal"><span class="pre">panya.templatetags.panya_template_tags</span></tt>.</p>
<p>To activate them use <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">load</span> <span class="pre">panya_template_tags</span> <span class="pre">%}</span></tt> in your template.</p>
<div class="section" id="humanize-time-diff">
<span id="template-tags-panya-humanize-time-diff"></span><h3><a class="toc-backref" href="#id4">humanize_time_diff</a><a class="headerlink" href="#humanize-time-diff" title="Permalink to this headline">¶</a></h3>
<p>Outputs a humanized string representing the time difference between now and the provided datetime. A suffix as provided is appended to the output.</p>
<p><strong>Sample usage</strong>:</p>
<div class="highlight-python"><pre>{% humanize_time_diff object.created 'ago' %}</pre>
</div>
<p><strong>Sample output</strong>:</p>
<div class="highlight-python"><pre>4 days ago</pre>
</div>
</div>
<div class="section" id="smart-query-string">
<span id="template-tags-panya-smart-query-string"></span><h3><a class="toc-backref" href="#id5">smart_query_string</a><a class="headerlink" href="#smart-query-string" title="Permalink to this headline">¶</a></h3>
<p>Outputs current GET query string with additions appended and existing parameters updated. Parameters and their values are provided in token pairs.</p>
<p><strong>Sample usage</strong>:</p>
<div class="highlight-python"><pre>{% smart_query_string 'page' '2' 'color' 'red' %}</pre>
</div>
<p><strong>Consider the following example:</strong></p>
<p>A page is accessed with the following GET query string:</p>
<div class="highlight-python"><pre>?page=2</pre>
</div>
<p>If you want to update the query string to have a <tt class="docutils literal"><span class="pre">page</span></tt> value of <tt class="docutils literal"><span class="pre">3</span></tt> and add another parameter called <tt class="docutils literal"><span class="pre">color</span></tt> set to <tt class="docutils literal"><span class="pre">red</span></tt>, you would call the <tt class="docutils literal"><span class="pre">smart_query_string</span></tt> tag as follows:</p>
<div class="highlight-python"><pre>{% smart_query_string 'page' '3' 'color' 'red' %}</pre>
</div>
<p>Which would output:</p>
<div class="highlight-python"><pre>?page=3&amp;color=red</pre>
</div>
<p>Note how the existing <tt class="docutils literal"><span class="pre">page</span></tt> parameter was updated, and the new <tt class="docutils literal"><span class="pre">color</span></tt> parameter was appended to the query string.</p>
</div>
<div class="section" id="smart-url">
<span id="template-tags-panya-smart-url"></span><h3><a class="toc-backref" href="#id6">smart_url</a><a class="headerlink" href="#smart-url" title="Permalink to this headline">¶</a></h3>
<p>Outputs a URL as determined by a provided callable for a provided object.</p>
<p><strong>Sample usage</strong>:</p>
<div class="highlight-python"><pre>{% smart_url url_callable object %}</pre>
</div>
<p>The provided callable should accept an <tt class="docutils literal"><span class="pre">obj</span></tt> parameter, which is the object provided in the tag.</p>
<p><strong>Consider the following example:</strong></p>
<p>A callable returning a URL has been defined as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SectionURL</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">categories</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">title__iexact</span><span class="o">=</span><span class="s">&#39;news&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;news_detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;slug&#39;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">slug</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="n">get_absolute_url</span><span class="p">()</span>
</pre></div>
</div>
<p>When this callable is used with the <tt class="docutils literal"><span class="pre">smart_url</span></tt> tag a URL pointing to the <tt class="docutils literal"><span class="pre">news_detail</span></tt> view would be returned if the object was categorized  as <em>News</em>. Otherwise the object&#8217;s normal <tt class="docutils literal"><span class="pre">get_absolute_url</span></tt> method output is returned.</p>
<p>This tag enables objects to arbitrarily link to various URLs. Specialized generic URL callables can be created in view code without having to modify model specific <tt class="docutils literal"><span class="pre">get_absolute_url</span></tt> methods.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <a href="http://github.com/praekelt/panya"><img style="position: fixed; top: 0; right: 0; border: 0;"
  src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-8783026-21']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>